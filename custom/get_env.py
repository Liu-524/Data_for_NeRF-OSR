import numpy as np 
from demo_projSH_rotSH import Rotation

def deg_to_rad(deg):
    return deg / 180 * np.pi

env_1548 = [
[
    3.715684652328491,
    3.7313740253448486,
    3.7144837379455566
],
[
    0.0021482156589627266,
    -0.0011243859771639109,
    0.03105148859322071
],
[
    -0.019765857607126236,
    -0.019573139026761055,
    0.0036688626278191805
],
[
    0.000654301606118679,
    0.012398498132824898,
    -0.0015207023825496435
],
[
    -0.001488028559833765,
    -0.010516843758523464,
    0.013358150608837605
],
[
    -0.02164466679096222,
    -0.01954767107963562,
    -0.0030072974041104317
],
[
    0.007925079204142094,
    0.002651737304404378,
    0.012925163842737675
],
[
    -0.013078725896775723,
    -0.01879662647843361,
    -0.019850976765155792
],
[
    0.005819284822791815,
    0.0009289529407396913,
    -0.014435422606766224
]]

env_4479 = [
    [
      4.9625701904296875,
      5.318830490112305,
      4.876247882843018
    ],
    [
      0.05683973431587219,
      0.14324092864990234,
      0.04425367712974548
    ],
    [
      0.008297523483633995,
      0.034551944583654404,
      -0.002687804400920868
    ],
    [
      -0.0061746081337332726,
      -0.2077496349811554,
      -0.03902368247509003
    ],
    [
      -0.07910604029893875,
      -0.16731485724449158,
      -0.0465889610350132
    ],
    [
      0.022785283625125885,
      0.05906199291348457,
      0.01358397863805294
    ],
    [
      -0.03625927492976189,
      -0.09381994605064392,
      -0.023077843710780144
    ],
    [
      -0.04180077463388443,
      -0.0757378563284874,
      -0.012903504073619843
    ],
    [
      0.06392600387334824,
      0.20457801222801208,
      0.04967886954545975
    ]
  ]

env = np.array(env_1548)


rot = Rotation()
env = rot.rot_z(deg_to_rad(-15)) @ env


with open('000001.txt', 'w') as f:
    for row in env:
        f.write(' '.join([str(x) for x in row]) + '\n')
    

'''
NOTE: Command to run novel lighting.
python ddp_test_nerf.py --config configs/kitti/dev.txt --render_splits novel_light --test_env $DATASET_DIR/nerfosr/kitti/dev/novel_light/envmaps
'''